<section class="configuration">
  <mat-card>
    <mat-card-content>
      <div fxLayout="row" fxLayoutGap="1em" class="diceConfig" style="overflow: auto">
        <ng-container *ngFor="let die of dice; index as i; last as isLastDie">
          <div class="die" fxFlex.xs="20" fxFlex.sm="20">
            <h3>Die {{i + 1}}</h3>
            <app-die [config]="config" [die]="die" (dieChanged)="onChange()"></app-die>
          </div>
        </ng-container>

        <button mat-button (click)="openConfig()" class="configButton">
          <mat-icon>settings</mat-icon>
        </button>
      </div>
    </mat-card-content>
  </mat-card>
</section>

<section class="results">
  <mat-card>
    <mat-card-title>Results</mat-card-title>
    <mat-card-content>
      <ng-container *ngIf="isProcessing">
        <mat-spinner></mat-spinner>
        <button mat-button (click)="cancel()">Cancel</button>
      </ng-container>

      <ng-container *ngIf="isCancelled">
        Cancelled...
        <button mat-button (click)="reload()">Reload</button>
      </ng-container>

      <ng-container *ngIf="!isProcessing && !isCancelled && equationGroups.length">
        <div *ngFor="let group of equationGroups; last as isLastGroup">
          <mat-list>
            <mat-list-item *ngFor="let equationStr of group[1]" (click)="selectEquationString(equationStr)" [ngClass]="equationStringListItemClass(equationStr)">
              {{equationStr}}
            </mat-list-item>
          </mat-list>
          <mat-divider *ngIf="!isLastGroup"></mat-divider>
        </div>
      </ng-container>

      <ng-container *ngIf="!isProcessing && !isCancelled && !equationGroups.length">
        No equations could be determined.
      </ng-container>
    </mat-card-content>
  </mat-card>
</section>
