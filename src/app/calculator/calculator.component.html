<mat-card id="diceOptions">
  <mat-card-title>Dice</mat-card-title>
  <mat-card-content>
    <app-dice
      [dice]="dice"
      (faceChanged)="onDiceFaceChanged($event)"
    ></app-dice>
  </mat-card-content>
</mat-card>

<br />

<mat-card class="results">
  <mat-card-title>
    Results
    <span *ngIf="equationsCount > 0"> ({{ equationsCount }})</span>
  </mat-card-title>

  <ng-container [ngSwitch]="calculateState">
    <mat-card-content *ngSwitchCase="calculateStates.PROCESSING">
      <p><mat-spinner></mat-spinner></p>
      <button mat-flat-button (click)="cancel()" data-testid="cancelButton">
        Cancel
      </button>
    </mat-card-content>

    <mat-card-content *ngSwitchCase="calculateStates.CANCELLED">
      <p>Cancelled...</p>
      <button mat-flat-button (click)="reload()" data-testid="reloadButton">
        Reload
      </button>
    </mat-card-content>

    <ng-container
      *ngSwitchDefault
      [ngSwitch]="workerResponseDataArray.length > 0"
    >
      <mat-card-content *ngSwitchCase="false"
        >No equations could be determined.</mat-card-content
      >

      <ng-container *ngSwitchDefault>
        <mat-card-subtitle>
          <div>Jump to solution:</div>
          <div>
            <button
              *ngFor="let data of workerResponseDataArray"
              mat-button
              (click)="scrollToId(groupId(data.total), data.total)"
            >
              {{ data.total }}
            </button>
          </div>
        </mat-card-subtitle>

        <mat-card-content>
          <mat-selection-list [multiple]="false">
            <ng-container *ngFor="let data of workerResponseDataArray">
              <mat-divider [id]="groupId(data.total)"></mat-divider>
              <mat-list-option
                *ngFor="let calculateResultWithEquation of data.results"
                [value]="calculateResultWithEquation.fullEquation"
              >
                <app-math-jax
                  [equation]="calculateResultWithEquation.fullEquation"
                ></app-math-jax>
              </mat-list-option>
            </ng-container>
            <mat-divider></mat-divider>
          </mat-selection-list>
        </mat-card-content>
      </ng-container>
    </ng-container>
  </ng-container>
</mat-card>

<app-scroll-to-top
  [visibleAfterElementQuery]="'#diceOptions'"
  [offsetElementQuery]="'#appToolbar'"
></app-scroll-to-top>
